(()=>{var e={371:(e,t,s)=>{s(738).config(Object.assign({},s(547),s(962)(process.argv)))},962:e=>{const t=/^dotenv_config_(encoding|path|debug|override)=(.+)$/;e.exports=function(e){return e.reduce((function(e,s){const r=s.match(t);return r&&(e[r[1]]=r[2]),e}),{})}},547:e=>{const t={};null!=process.env.DOTENV_CONFIG_ENCODING&&(t.encoding=process.env.DOTENV_CONFIG_ENCODING),null!=process.env.DOTENV_CONFIG_PATH&&(t.path=process.env.DOTENV_CONFIG_PATH),null!=process.env.DOTENV_CONFIG_DEBUG&&(t.debug=process.env.DOTENV_CONFIG_DEBUG),null!=process.env.DOTENV_CONFIG_OVERRIDE&&(t.override=process.env.DOTENV_CONFIG_OVERRIDE),e.exports=t},738:(e,t,s)=>{const r=s(147),o=s(17),n=s(37),a=s(968).version,u=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function i(e){console.log(`[dotenv@${a}][DEBUG] ${e}`)}const c={config:function(e){let t=o.resolve(process.cwd(),".env"),s="utf8";const a=Boolean(e&&e.debug),u=Boolean(e&&e.override);var d;e&&(null!=e.path&&(t="~"===(d=e.path)[0]?o.join(n.homedir(),d.slice(1)):d),null!=e.encoding&&(s=e.encoding));try{const e=c.parse(r.readFileSync(t,{encoding:s}));return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?(!0===u&&(process.env[t]=e[t]),a&&i(!0===u?`"${t}" is already defined in \`process.env\` and WAS overwritten`:`"${t}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[t]=e[t]})),{parsed:e}}catch(e){return a&&i(`Failed to load ${t} ${e.message}`),{error:e}}},parse:function(e){const t={};let s,r=e.toString();for(r=r.replace(/\r\n?/gm,"\n");null!=(s=u.exec(r));){const e=s[1];let r=s[2]||"";r=r.trim();const o=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===o&&(r=r.replace(/\\n/g,"\n"),r=r.replace(/\\r/g,"\r")),t[e]=r}return t}};e.exports.config=c.config,e.exports.parse=c.parse,e.exports=c},207:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(931)),a=o(s(681)),u={getAllJoinedProjects(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.auth)throw n.default.BadRequest("User ID must be provided!");const s=yield a.default.getAllJoinedProjects(e.auth);return t.status(200).json(s)}catch(e){return console.log(e.message),t.status(404).json({message:e.message,status:e.status||404})}}))},getJoinedProject(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.auth)throw n.default.BadRequest("User ID must be provided!");const s=yield a.default.getJoinedProject(e.params.id,e.auth);return t.status(200).json(s)}catch(e){return console.log(e.message),t.status(404).json({message:e.message,status:e.status||404})}}))},getProjectByCreator(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.auth)throw n.default.BadRequest("User ID must be provided!");const s=yield a.default.getProjectByCreator(e.params.id,e.auth);return t.status(200).json(s)}catch(e){return console.log(e.message),t.status(404).json({message:e.message,status:e.status||404})}}))},getAllProjectsByCreator(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.auth)throw n.default.BadRequest("User ID must be provided!");const s=yield a.default.getAllProjectsByCreator(e.auth);return t.status(200).json(s)}catch(e){return console.log(e.message),t.status(404).json({message:e.message,status:e.status||404})}}))},createNewProject(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.body)throw n.default.BadRequest("Provide fully new project data!");const s=yield a.default.createProject(Object.assign({creator:e.auth},e.body));return t.status(201).json(s)}catch(e){return console.log(e.message),t.status(400).json({message:e.message,status:e.status||404})}}))},updateProject(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.body||!e.params)throw n.default.InternalServerError("Failed to update project!");const s=yield a.default.updateProject(e.params.id,e.body);return t.status(201).json(s)}catch(e){return t.status(400).json({message:e.message,status:e.status})}}))},addMemberToProject(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.body.member)throw n.default.BadRequest("Provide member ID to add to project!");const s=yield a.default.addMemberToProject(e.params.id,e.body.member);return t.status(201).json(s)}catch(e){return t.status((null==e?void 0:e.status)||500).json({message:"This user might join in your project or not exist!",status:e.status})}}))},removeMemberToProject(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.body.member)throw n.default.BadRequest("Provide member ID to add to project!");const s=yield a.default.removeMemberFromProject(e.params.id,e.body.member);return t.status(201).json(s)}catch(e){return t.status(e.status||500).json({message:e.message,status:e.status||500})}}))},deleteProject(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.params.id)throw n.default.NotFound("Cannot find project ID");const s=yield a.default.deleteProject(e.params.id);return t.status(204).json(s)}catch(e){return t.status(e.status).json({message:e.message,status:e.status||500})}}))}};t.default=u},498:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(931)),a=o(s(433)),u={getTasksByProject(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.params.projectId)throw n.default.NotFound("Project ID is not valid!");const s=yield a.default.getTasksByProject(e.params.projectId);return t.status(200).json(s)}catch(e){return t.status(e.statusCode).json({message:e.message,statusCode:e.statusCode||500})}}))},createTask(e,t){return r(this,void 0,void 0,(function*(){try{if(console.log(e.body),!e.body)throw n.default.BadRequest("Task data must be provided!");const s=yield a.default.createTask(e.body);return t.status(201).json(s)}catch(e){return t.status(500).json({message:e.message,statusCode:e.statusCode||500})}}))},updateTask(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.params.taskId||!e.body||!e.query.projectId)throw n.default.NotFound("Unacceptable request!");const s=yield a.default.updateTask(e.params.taskId,e.body);return console.log(s),t.status(202).json(s)}catch(e){return console.log(e),t.status(e.statusCode||500).json({message:e.message,statusCode:e.statusCode||500})}}))},deleteTask(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.params.taskId)throw n.default.NotFound("Task ID is invalid!");const s=yield a.default.deleteTask(e.params.taskId);return t.status(204).json(s)}catch(e){return t.status(e.statusCode).json({message:e.message,statusCode:e.statusCode||500})}}))}};t.default=u},563:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(371);const n=o(s(931)),a=o(s(344)),u=o(s(978)),i={login(e,t){return r(this,void 0,void 0,(function*(){try{const s=yield u.default.login(e.body),r=a.default.sign({auth:s._id},process.env.SECRET_KEY,{expiresIn:"30m"});return console.log(s),t.status(200).json({accessToken:r,auth:s._id})}catch(e){return t.status(400).json({message:e.message,statusCode:e.statusCode})}}))},register(e,t){return r(this,void 0,void 0,(function*(){try{if(console.log(e.body),!e.body||!Object.keys(e.body).length)throw n.default.BadRequest("User data must be provided!");const s=yield u.default.register(e.body);return t.status(201).json(s)}catch(e){return console.log(e.message),t.status(400).json({message:e.message,statusCode:e.statusCode})}}))},getUser(e,t){return r(this,void 0,void 0,(function*(){try{if(!e.auth)throw n.default.Forbidden("User credential must be provided");const s=yield u.default.getUser(e.auth);return t.status(200).json(s)}catch(e){return t.status(e.statusCode).json({message:e.message,statusCode:e.statusCode})}}))},refreshToken(e,t){return r(this,void 0,void 0,(function*(){try{const s=a.default.sign({auth:e.params.auth},process.env.SECRET_KEY,{expiresIn:"1h"});return t.status(200).json(s)}catch(e){return t.status(e.statusCode).json({message:e.message,statusCode:e.statusCode})}}))},findUser(e,t){return r(this,void 0,void 0,(function*(){try{const s=yield u.default.findUser(e.query.searchTerm);return t.status(200).json(s)}catch(e){return t.status(e.statusCode).json({message:e.message,statusCode:e.statusCode})}}))},changePassword(e,t){return r(this,void 0,void 0,(function*(){try{return console.log(e.body),yield u.default.changePassword(e.auth,e.body.currentPassword,e.body.newPassword)}catch(e){return t.status(400).json({message:e.message,status:e.status})}}))},editProfile(e,t){return r(this,void 0,void 0,(function*(){try{const s=yield u.default.editProfile(e.auth,e.body);return t.status(201).json(s)}catch(e){return t.status(400).json({message:e.message,status:e.status})}}))}};t.default=i},917:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(371);const n=o(s(931)),a=o(s(344)),u=o(s(764)),i=o(s(681)),c={checkAuthenticated(e,t,s){return r(this,void 0,void 0,(function*(){try{let t=e.headers.authorization;if(!t)throw n.default.Unauthorized("Access token must be provided!");t=t.split(" ").at(1);const r=a.default.verify(t,process.env.SECRET_KEY),o=yield u.default.findOne({_id:r.auth}).select("-password").exec();e.auth=o._id,s()}catch(e){return t.status(401).json({message:e.message,status:e.status})}}))},checkIsProjectCreator(e,t,s){return r(this,void 0,void 0,(function*(){try{const t=e.params.projectId||e.params.id||e.query.projectId;console.log(t);const r=yield i.default.getProjectByCreator(t,e.auth);if(console.log(r),!r)throw n.default.Forbidden("You are not project creator!");s()}catch(e){return t.status(403).json({message:e.message,status:e.status})}}))},checkIsMember(e,t,s){return r(this,void 0,void 0,(function*(){try{const t=e.params.id||e.params.projectId||e.query.projectId;if(!(yield i.default.getJoinedProject(t,e.auth)))throw n.default.Unauthorized("You are not a member of this project!");s()}catch(e){return t.status(403).json({message:e.message,statusCode:e.statusCode})}}))}};t.default=c},921:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(s(185)),n=r(s(314)),a=new o.default.Schema({projectName:{type:String,trim:!0,minLength:3,require:!0},creator:{type:o.default.Types.ObjectId,ref:"Users",autopopulate:{select:"-password -__v"}},members:[{info:{type:o.default.Types.ObjectId,ref:"Users",autopopulate:{select:"-password -__v"}},joinedAt:{type:Date,default:new Date},role:{type:String,enum:["MEMBER","PROJECT_MANAGER"]}}],customer:{type:String,uppercase:!0,trim:!0,require:!0,default:"Unknown"},budget:{type:Number,default:1e3},estimatedCompleteDate:{type:Date,default:()=>{const e=new Date,t=new Date;return t.setMonth(e.getMonth()+7),t}}},{strictPopulate:!1,strictQuery:!1,timestamps:!0,toJSON:{virtuals:!0}});a.plugin(n.default),a.pre("save",(function(e){this.members.push({info:this.creator,role:"PROJECT_MANAGER",joinedAt:new Date}),e()})),a.virtual("tasks",{ref:"Tasks",localField:"_id",foreignField:"project"});const u=o.default.model("Projects",a);t.default=u},958:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(s(314)),n=r(s(185)),a=new n.default.Schema({project:{type:n.default.Types.ObjectId,ref:"Projects"},title:{type:String,trim:!0,require:!0,minLength:3},creator:{type:n.default.Types.ObjectId,ref:"Users",autopopulate:{select:"-password"}},description:{type:String,trim:!0,require:!0},assignee:{type:n.default.Types.ObjectId,ref:"Users",autopopulate:{select:"-password"}},startedAt:{type:Date,require:!0,default:new Date},deadline:{type:Date,require:!0,default:function(){const e=new Date,t=new Date;return t.setDate(e.getDate()+3),t}},status:{type:String,require:!0,default:"TODO",enum:["TODO","IN_PROGRESS","COMPLETED"]}},{timestamps:!0,strictQuery:!1,strictPopulate:!1});a.plugin(o.default);const u=n.default.model("Tasks",a);t.default=u},764:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(s(96)),n=r(s(185)),a=new n.default.Schema({email:{type:String,require:!0,trim:!0,unique:!0,validate:{validator:function(e){return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(e)},message:e=>`${e.value} is not a valid email address!`}},password:{type:String,require:!0,minLength:6,trim:!0},username:{type:String,trim:!0,require:!0},photoUrl:{type:String,trim:!0,require:!0}});a.methods.authenticate=function(e){return o.default.compareSync(e,this.password)};const u=n.default.model("Users",a);a.pre("save",(function(e){var t;this.password=o.default.hashSync(this.password,o.default.genSaltSync(10)),this.photoUrl="https://ui-avatars.com/api/?name="+(null===(t=this.username)||void 0===t?void 0:t.charAt(0)),e()})),t.default=u},195:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(860),n=r(s(207)),a=r(s(917)),u=(0,o.Router)();u.get("/projects",a.default.checkAuthenticated,n.default.getAllJoinedProjects),u.get("/projects/created-by/:userId",a.default.checkAuthenticated,n.default.getAllJoinedProjects),u.get("/projects/:id",a.default.checkAuthenticated,n.default.getJoinedProject),u.post("/projects",a.default.checkAuthenticated,n.default.createNewProject),u.patch("/projects/:id",a.default.checkAuthenticated,a.default.checkIsProjectCreator,n.default.updateProject),u.patch("/projects/:id/add-member",a.default.checkAuthenticated,a.default.checkIsMember,n.default.addMemberToProject),u.patch("/projects/:id/remove-member",a.default.checkAuthenticated,a.default.checkIsProjectCreator,n.default.removeMemberToProject),u.delete("/projects/:id",a.default.checkAuthenticated,a.default.checkIsProjectCreator,n.default.deleteProject),t.default=u},187:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(860),n=r(s(498)),a=r(s(917)),u=(0,o.Router)();u.get("/tasks/:projectId",n.default.getTasksByProject),u.post("/tasks/:projectId",a.default.checkAuthenticated,a.default.checkIsMember,n.default.createTask),u.patch("/tasks/:taskId",a.default.checkAuthenticated,a.default.checkIsMember,n.default.updateTask),u.delete("/tasks/:taskId",a.default.checkAuthenticated,a.default.checkIsMember,n.default.deleteTask),t.default=u},586:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(860),n=r(s(563)),a=r(s(917)),u=(0,o.Router)();u.get("/user",a.default.checkAuthenticated,n.default.getUser),u.get("/refresh-token/:auth",n.default.refreshToken),u.get("/find-user",n.default.findUser),u.post("/login",n.default.login),u.post("/register",n.default.register),u.patch("/change-password",a.default.checkAuthenticated,n.default.changePassword),u.patch("/edit-profile",a.default.checkAuthenticated,n.default.editProfile),t.default=u},681:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(185)),a=o(s(921)),u=o(s(958)),i={getAllJoinedProjects(e){return r(this,void 0,void 0,(function*(){try{return yield a.default.find().elemMatch("members",{info:e}).populate({path:"tasks",select:"-creator -assignee"}).exec()}catch(e){throw e}}))},getJoinedProject(e,t){return r(this,void 0,void 0,(function*(){try{return yield a.default.findOne({_id:e}).elemMatch("members",{info:t}).exec()}catch(e){throw e}}))},getAllProjectsByCreator(e){return r(this,void 0,void 0,(function*(){try{return yield a.default.find({creator:e}).exec()}catch(e){throw e}}))},getProjectByCreator(e,t){return r(this,void 0,void 0,(function*(){try{const s=yield a.default.findOne({_id:e,creator:t}).exec();return console.log(s),s}catch(e){throw e}}))},createProject(e){return r(this,void 0,void 0,(function*(){try{return console.log(e),yield new a.default(e).save()}catch(e){throw e}}))},updateProject(e,t){return r(this,void 0,void 0,(function*(){try{return yield a.default.findOneAndUpdate({_id:e},t,{new:!0}).exec()}catch(e){throw e}}))},addMemberToProject(e,t){return r(this,void 0,void 0,(function*(){try{return yield a.default.findOneAndUpdate({_id:e,"members.info":{$ne:t}},{$push:{members:{info:t,role:"MEMBER"}}},{new:!0,upsert:!0}).exec()}catch(e){throw e}}))},removeMemberFromProject(e,t){return r(this,void 0,void 0,(function*(){try{return yield a.default.findOneAndUpdate({_id:e},{$pull:{members:{info:t,role:"MEMBER"}}},{new:!0}).exec()}catch(e){throw e}}))},deleteProject(e){return r(this,void 0,void 0,(function*(){try{const t=new n.default.Types.ObjectId(e),s=a.default.deleteOne({_id:e}).exec(),r=u.default.deleteMany({project:t});return yield Promise.all([s,r])}catch(e){throw e}}))}};t.default=i},433:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(958)),a={getTasksByProject(e){return r(this,void 0,void 0,(function*(){try{return yield n.default.find({project:e}).exec()}catch(e){throw e}}))},updateTask(e,t){return r(this,void 0,void 0,(function*(){try{return yield n.default.findOneAndUpdate({_id:e},t,{new:!0}).exec()}catch(e){throw console.log(e),e}}))},createTask(e){return r(this,void 0,void 0,(function*(){try{return yield new n.default(e).save()}catch(e){throw e}}))},deleteTask(e){return r(this,void 0,void 0,(function*(){try{return yield n.default.deleteOne({_id:e}).exec()}catch(e){throw e}}))}};t.default=a},978:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(96)),a=s(185),u=o(s(764)),i={login(e){return r(this,void 0,void 0,(function*(){try{const t=yield u.default.findOne({email:e.email}).exec();if(!t)throw new a.MongooseError("Account doesn't exist!");if(!t.authenticate(e.password))throw new a.MongooseError("Password is incorrect!");return t}catch(e){throw e}}))},register(e){return r(this,void 0,void 0,(function*(){try{if(yield u.default.findOne({email:e.email}).exec())throw new Error("Account already exited!");return yield new u.default(e).save()}catch(e){throw console.log(e.message),e}}))},getUser(e){return r(this,void 0,void 0,(function*(){try{return yield u.default.findOne({_id:e}).select("-password").exec()}catch(e){throw e}}))},findUser(e){return r(this,void 0,void 0,(function*(){try{const t=new RegExp(e,"gi"),s=yield u.default.find({$or:[{email:t},{username:t}]}).select("-password").exec();return console.log(t),s}catch(e){throw e}}))},changePassword(e,t,s){return r(this,void 0,void 0,(function*(){try{const r=yield u.default.findOne({_id:e}).exec();if(!(null==r?void 0:r.authenticate(t)))throw new Error("Current password is incorrect!");console.log(s);const o=n.default.hashSync(s,n.default.genSaltSync(10));return yield u.default.updateOne({_id:e},{password:o},{new:!0})}catch(e){throw e}}))},editProfile(e,t){return r(this,void 0,void 0,(function*(){try{return t.username&&(t.photoUrl="https://ui-avatars.com/api/?name="+t.username.charAt(0)),yield u.default.findOneAndUpdate({_id:e},t,{new:!0})}catch(e){throw e}}))}};t.default=i},752:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(s(860)),a=o(s(948)),u=o(s(777)),i=o(s(455)),c=o(s(582)),d=o(s(470)),l=o(s(195)),f=o(s(187)),h=o(s(586)),p=(0,n.default)();p.use((0,c.default)({origin:"*"})),p.use((0,d.default)("tiny")),p.use(n.default.json()),p.use((0,i.default)({level:6,threshold:10240})),p.use("/v1/api",h.default),p.use("/v1/api",l.default),p.use("/v1/api",f.default),p.get("/",((e,t)=>r(void 0,void 0,void 0,(function*(){return t.status(200).json({status:200,message:"Server now is running!"})})))),p.use("/api/docs",a.default.serve,a.default.setup((0,u.default)({definition:{openapi:"3.0.0",info:{title:"API Document",version:"1.0.0",description:"API documentation for Front-end"},servers:[{url:"http://localhost:3001/api"}]},apis:["src/apis/v1/routes/*.ts"]}))),t.default=p},715:function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(o,n){function a(e){try{i(r.next(e))}catch(e){n(e)}}function u(e){try{i(r.throw(e))}catch(e){n(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,u)}i((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(371);const n=o(s(185));t.default=()=>r(void 0,void 0,void 0,(function*(){var e,t,s;try{const r=null===(t=null===(e="production")?void 0:e.toUpperCase())||void 0===t?void 0:t.includes("PRODUCTION");console.log(`[INFO] ${null===(s="production")?void 0:s.trim().toUpperCase()} MODE`);const o=r?process.env.REMOTE_DB_URI:process.env.LOCAL_DB_URI;n.default.set("strictQuery",!1);if(!(yield n.default.connect(o,{serverSelectionTimeoutMS:5e3})))throw new Error("[ERROR] Failed to connect database!");console.log("[SUCCESS] Connected to database!")}catch(e){const t=e;console.log(t.message)}}))},728:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(s(752));s(371);const n=r(s(715)),a=r(s(685)),u=process.env.PORT||3001;a.default.createServer(o.default).listen(u,(()=>{console.log(`[SUCCESS] Server is listening on port ${u}`),console.log(`[INFO] API document is available on: http://localhost:${u}/api/docs`)})),(0,n.default)()},96:e=>{"use strict";e.exports=require("bcrypt")},455:e=>{"use strict";e.exports=require("compression")},582:e=>{"use strict";e.exports=require("cors")},860:e=>{"use strict";e.exports=require("express")},931:e=>{"use strict";e.exports=require("http-errors")},344:e=>{"use strict";e.exports=require("jsonwebtoken")},185:e=>{"use strict";e.exports=require("mongoose")},314:e=>{"use strict";e.exports=require("mongoose-autopopulate")},470:e=>{"use strict";e.exports=require("morgan")},777:e=>{"use strict";e.exports=require("swagger-jsdoc")},948:e=>{"use strict";e.exports=require("swagger-ui-express")},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")},968:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.0.3","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"require":"./lib/main.js","types":"./lib/main.d.ts","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^17.0.9","decache":"^4.6.1","dtslint":"^3.7.0","sinon":"^12.0.1","standard":"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2","tap":"^15.1.6","tar":"^6.1.11","typescript":"^4.5.4"},"engines":{"node":">=12"}}')}},t={};(function s(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,s),n.exports})(728)})();